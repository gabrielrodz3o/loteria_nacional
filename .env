# ========================================
# ARCHIVO .env COMPLETO Y OPTIMIZADO
# PARA SISTEMA DE PREDICCIONES DE LOTERÍA
# ========================================
# 
# UBICACIÓN: /Users/gabrielrodriguez/Documents/Projects/loteria_nacional/.env
# 
# INSTRUCCIONES:
# 1. Guarda este archivo como .env en la raíz de tu proyecto
# 2. NO cambies las optimizaciones de rendimiento
# 3. Solo modifica las URLs/passwords si es necesario
# ========================================

# ========================================
# DATABASE CONFIGURATION (OPTIMIZADO)
# ========================================
DATABASE_URL=postgresql://loteria_user:LoteriaPass2024!@localhost:5432/loteria_db
TEST_DATABASE_URL=postgresql://loteria_user:LoteriaPass2024!@localhost:5432/loteria_test_db

# Connection Pool Settings (CRÍTICO PARA RENDIMIENTO)
DB_POOL_SIZE=25
DB_MAX_OVERFLOW=50
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true
DB_ECHO=false

# Query Optimization (NUEVO)
DB_QUERY_TIMEOUT=30
DB_BATCH_SIZE=1000
DB_MAX_RETRIES=3
DB_RETRY_DELAY=1

# Query Cache (NUEVO - IMPORTANTE)
DB_QUERY_CACHE_SIZE=1000
DB_QUERY_CACHE_TTL=300

# ========================================
# REDIS CONFIGURATION (OPTIMIZADO)
# ========================================
REDIS_URL=redis://:LoteriaRedis2024!@localhost:6379/0

# Redis Connection Pool (NUEVO)
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=10
REDIS_SOCKET_CONNECT_TIMEOUT=10
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30

# ========================================
# API CONFIGURATION (OPTIMIZADO)
# ========================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=false
API_WORKERS=4
SECRET_KEY=your-secret-key-here-change-in-production

# Request Handling (NUEVO)
REQUEST_TIMEOUT=60
MAX_REQUEST_SIZE=10485760
KEEPALIVE_TIMEOUT=5

# ========================================
# SCRAPING CONFIGURATION (OPTIMIZADO)
# ========================================
SELENIUM_ENABLED=true
SELENIUM_HEADLESS=true
SCRAPING_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36

# Scraping Optimization (NUEVO)
SCRAPING_CONCURRENT_SESSIONS=3
SCRAPING_REQUEST_DELAY=1.0
SCRAPING_RETRY_ATTEMPTS=3
SCRAPING_TIMEOUT=30

# ========================================
# MACHINE LEARNING CONFIGURATION (CRÍTICO)
# ========================================
ML_MODEL_CACHE_DAYS=7
HISTORICAL_WINDOW_DAYS=365
MIN_TRAINING_SAMPLES=10
PREDICTION_BATCH_SIZE=500

# Training Optimization (CRÍTICO PARA TU CASO)
MAX_TRAINING_WORKERS=8
TRAINING_TIMEOUT_SECONDS=180
TRAINING_MEMORY_LIMIT_MB=1024

# Model Selection (FORMATO JSON VÁLIDO - CRÍTICO)
PRIORITY_MODELS=["lightgbm","xgboost","frequency_analysis","random_forest"]

# ========================================
# SCHEDULER CONFIGURATION (OPTIMIZADO)
# ========================================
ENABLE_SCHEDULER=true
SCRAPING_SCHEDULE=0 22 * * *
PREDICTION_SCHEDULE=0 6 * * *
CLEANUP_SCHEDULE=0 2 * * 0

# Batch Processing Schedules (NUEVO)
BATCH_TRAINING_SCHEDULE=0 1 * * *
BATCH_PREDICTION_SCHEDULE=30 6 * * *

# ========================================
# LOGGING CONFIGURATION (OPTIMIZADO)
# ========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_MAX_SIZE=104857600
LOG_BACKUP_COUNT=5
LOG_PERFORMANCE_METRICS=true

# Performance Logging (NUEVO)
ENABLE_PERFORMANCE_LOGGING=true
LOG_SLOW_QUERIES_THRESHOLD=1.0
LOG_MEMORY_USAGE=true

# ========================================
# CACHE CONFIGURATION (CRÍTICO PARA RENDIMIENTO)
# ========================================
CACHE_TTL_PREDICTIONS=1800
CACHE_TTL_STATISTICS=3600
CACHE_TTL_MODELS=86400

# In-memory Cache Settings (CRÍTICO)
MEMORY_CACHE_SIZE_MB=256
CACHE_CLEANUP_INTERVAL=300
DATA_CACHE_ENABLED=true
DATA_CACHE_TTL=3600
DATA_CACHE_MAX_ENTRIES=1000

# ========================================
# VECTOR/EMBEDDING CONFIGURATION (OPTIMIZADO)
# ========================================
EMBEDDING_DIMENSIONS=64
EMBEDDING_BATCH_SIZE=100
VECTOR_SIMILARITY_THRESHOLD=0.8

# ========================================
# LOTTERY SPECIFIC CONFIGURATION
# ========================================
MAX_PREDICTIONS_PER_GAME=3
NUMBER_RANGE_MIN=0
NUMBER_RANGE_MAX=99

# Processing Optimization (NUEVO)
PARALLEL_GAME_PROCESSING=true
PREDICTION_CONFIDENCE_THRESHOLD=0.1

# ========================================
# SECURITY CONFIGURATION
# ========================================
CORS_ORIGINS=*
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ========================================
# PERFORMANCE MONITORING (NUEVO)
# ========================================
ENABLE_PROFILING=false
MEMORY_PROFILING=false
QUERY_PROFILING=false

# Performance Thresholds (IMPORTANTE)
MAX_MEMORY_USAGE_MB=2048
MAX_CPU_USAGE_PERCENT=80.0
MAX_PROCESSING_TIME_MINUTES=30

# Garbage Collection (CRÍTICO PARA MEMORIA)
GC_THRESHOLD=100
GC_ENABLED=true

# ========================================
# BATCH PROCESSING (CRÍTICO PARA TU PROBLEMA)
# ========================================
BATCH_PROCESSING_ENABLED=true
BATCH_SIZE=50
MAX_CONCURRENT_BATCHES=3
BATCH_RETRY_ATTEMPTS=2
BATCH_TIMEOUT_MINUTES=45

# Date Range Processing (OPTIMIZACIONES CLAVE)
MAX_DATES_PER_BATCH=30
SKIP_EXISTING_PREDICTIONS=true

# ========================================
# DEVELOPMENT/DEBUG SETTINGS
# ========================================
DEBUG=false
TESTING=false
ENABLE_SQL_ECHO=false

# ========================================
# CONFIGURACIONES ADICIONALES (SI LAS NECESITAS)
# ========================================

# Configuraciones de seguridad adicionales
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30

# Configuraciones de notificaciones (opcional)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=tu-email@gmail.com
SMTP_PASSWORD=tu-app-password

# Configuraciones de monitoring externo (opcional)
SENTRY_DSN=
PROMETHEUS_PORT=9090

# Configuraciones de backup (opcional)
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=30

# ========================================
# NOTAS IMPORTANTES:
# ========================================
# 
# 1. MIN_TRAINING_SAMPLES=10 (reducido de 50) - CRÍTICO para velocidad
# 2. MAX_TRAINING_WORKERS=8 - usa todos tus CPUs
# 3. BATCH_SIZE=50 - procesa fechas en lotes para eficiencia
# 4. DB_POOL_SIZE=25 - más conexiones simultáneas
# 5. PRIORITY_MODELS en formato JSON - DEBE ser así para funcionar
# 6. DATA_CACHE_ENABLED=true - cache inteligente de datos
# 
# Con estas configuraciones, tu procesamiento debería ser 5-10x más rápido
# 
# UBICACIÓN EXACTA: 
# /Users/gabrielrodriguez/Documents/Projects/loteria_nacional/.env
# 
# ========================================